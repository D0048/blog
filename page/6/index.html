<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>D0048</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="D0048">
<meta property="og:url" content="https://d0048.github.io/blog/page/6/index.html">
<meta property="og:site_name" content="D0048">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="D0048">
  
    <link rel="alternate" href="/blog/atom.xml" title="D0048" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/blog/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-88350074-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics --><!-- hexo-inject:begin --><!-- hexo-inject:end -->


</head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">D0048</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/blog/" id="subtitle">A record of thoughts, ideas, solutions and traps</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://d0048.github.io/blog"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-a-bad-but-useable-way-to-deal-with-_tchar-argv" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2017/02/08/a-bad-but-useable-way-to-deal-with-_tchar-argv/" class="article-date">
  <time datetime="2017-02-08T14:45:48.000Z" itemprop="datePublished">2017-02-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2017/02/08/a-bad-but-useable-way-to-deal-with-_tchar-argv/">A bad but useable way to deal with _TCHAR* argv[] parameter</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>from: <a href="http://stackoverflow.com/questions/19301538/converting-tchar-to-char" target="_blank" rel="external">http://stackoverflow.com/questions/19301538/converting-tchar-to-char</a><br>==Warning: this is a temporary solution and shouldn’t be used as a long-term solution. ==<br><br><br>Instead of using the original one, just use <code>int main(int argc, char *argv[])</code> instead. The new type _TCHAR is actually a macro of a longer char that allows more kinds of characters (char is 128 which is not enough) just for compatible purpose. Since I don’t need internalizations now anyways, I think it’s safe to do that. </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://d0048.github.io/blog/2017/02/08/a-bad-but-useable-way-to-deal-with-_tchar-argv/" data-id="cj93x35xv0006jqakkznzqhfc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/CPP/">CPP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Solution/">Solution</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-how-to-create-a-windows-services-program-to-run-background-in-start-up-and-how-to-register-it" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2017/02/08/how-to-create-a-windows-services-program-to-run-background-in-start-up-and-how-to-register-it/" class="article-date">
  <time datetime="2017-02-08T14:44:00.000Z" itemprop="datePublished">2017-02-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2017/02/08/how-to-create-a-windows-services-program-to-run-background-in-start-up-and-how-to-register-it/">How to create a windows services program to run background on start up and how to register it</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In order to create a windows serivice program, a program must have certain content inside to register and respond to actions. Also, it must be registered to the system through the program <code>sc</code> at shell or through editing the registry table which both need adminstrator permission. <br><br>In the program:<br><br>#Declare three global varible. The name is not important.</p>
<pre><block>
SERVICE_TABLE_ENTRY entryTable[2];
SERVICE_STATUS ServiceStatus;
SERVICE_STATUS_HANDLE hStatus;
</block></pre>

<p><br>#declare 2 global functions as follow which one will be called when the service start and work as the main function of the service in another process and another will be called when there is a control signal like start or restart was issued by the system or users. The name of them is not important. </p>
<pre><block>
void WINAPI ctrlHandler(DWORD request);
void WINAPI serviceMain(int argc, char**argv);
</block></pre>

<p><br>#Fill in the created array of the struct <code>SERVICE_TABLE_ENTRY</code> contains two elements in that service information in the first one and put all nulls in the second as follow. Then, use <code>StartServiceCtrlDispatcher(entryTable);</code> to register the service. This step have to be done during founction <code>main</code>.</p>
<pre><block>
void initEntryTable(SERVICE_TABLE_ENTRY &templateEnteyTable){
    entryTable[0].lpServiceName = templateEnteyTable.lpServiceName;
    entryTable[0].lpServiceProc = templateEnteyTable.lpServiceProc;
    entryTable[1].lpServiceName = NULL;
    entryTable[1].lpServiceProc = NULL;
    StartServiceCtrlDispatcher(entryTable);
}</block></pre>
I use these codes to initialize a entry table.
<pre><block>
        serviceT.lpServiceName = TEXT("testservice");
        serviceT.lpServiceProc = (LPSERVICE_MAIN_FUNCTION)serviceMain;
        initEntryTable(serviceT);
</block></pre>

<p><br>#Now the <code>void WINAPI serviceMain(int argc, char**argv);</code> should contains code like the following to illustrate the property of itself by giving certain value of the variables inside the struct ServiceStatus. Then, register the service and get the handle of it with <code>hStatus = ::RegisterServiceCtrlHandlerW(TEXT(&quot;testservice&quot;), ctrlHandler);</code></p>
<pre><block>
    ServiceStatus.dwServiceType = SERVICE_WIN32;

    ServiceStatus.dwCurrentState = SERVICE_START_PENDING;/*This is the state of this service and need to be changed actively.*/

    ServiceStatus.dwControlsAccepted = SERVICE_ACCEPT_SHUTDOWN | SERVICE_ACCEPT_STOP; /*This is the types of command your service could recieve*/

    ServiceStatus.dwWin32ExitCode = 0;/*I am still learning this part, leave it 0*/

    ServiceStatus.dwServiceSpecificExitCode = 0;/*I am still learning this part, leave it 0*/

    ServiceStatus.dwCheckPoint = 0;/*I am still learning this part, leave it 0*/

    ServiceStatus.dwWaitHint = 0;/*I am still learning this part, leave it 0*/


    hStatus = ::RegisterServiceCtrlHandlerW(TEXT("testservice"), ctrlHandler);
</block></pre>

<p><br>#Since the <code>serviceMain()</code> founction takes controll of the service status, the state of the service must be change to <code>ServiceStatus.dwCurrentState = SERVICE_RUNNING;</code> and report to the system with <code>SetServiceStatus</code> once it done with initialization or the system will wrongly recognize the service as “going wrong” and get a error of “failed to start, service is not responding”. </p>
<p><pre><block><br>    ServiceStatus.dwCurrentState = SERVICE_RUNNING;<br>    SetServiceStatus(hStatus, &amp;ServiceStatus);<br></block></pre></p>
<p><br>#For the void WINAPI <code>ctrlHandler(DWORD request)</code>, it deals with requests like shutdown and the request will be sent as parameter.</p>
<p><br>#The final step is to register the service officially to the system through <code>sc</code> or the registry table. I use the first step because it’s easier. </p>
<p>Manually: Enter system shell, use <code>sc create testservice binPath=&quot;C:\path\to\file.exe&quot;</code> to create a new service. ==(There is a space after all the <code>=</code> symbols which is necessary)==<br>To configure it like make the service start up on boot, either <code>sc config testservice [configuration]</code> or <code>sc create testservice [configuration works]</code>. </p>
<p>InCode: I use the following code the do the job.</p>
<p><pre><block><br>    std::string filename(argv[0]);<br>    string mycommand = (std::string)”sc create testservice binPath= \””+filename+”\””+” start= auto”;<br>    const char *c = mycommand.data();<br>    std::cout &lt;&lt; “Execute: “ &lt;&lt; mycommand &lt;&lt; “?” &lt;&lt; std::endl&lt;<c; _getch();="" system(c);="" <="" pre=""></c;></block></pre></p>
<p><br>#Now the service should be done and should be shown in the service control manager.<br>2017/2/9 13:06</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://d0048.github.io/blog/2017/02/08/how-to-create-a-windows-services-program-to-run-background-in-start-up-and-how-to-register-it/" data-id="cj93x35zk001fjqaku72m8ig9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/WinAPI/">WinAPI</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-a-way-to-avoid-duplicate-declaration" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2017/02/08/a-way-to-avoid-duplicate-declaration/" class="article-date">
  <time datetime="2017-02-08T14:36:25.000Z" itemprop="datePublished">2017-02-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2017/02/08/a-way-to-avoid-duplicate-declaration/">A way to avoid duplicate declaration</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>While there are multiple hear file insertions and there are insertions inside those header files, it’s common that a error of duplicate declaration occurs. To solve that, one way is add a macro <code>#ifndef HEADER_FILE_H</code> after the macro <code>#define &lt;header_file.h&gt;</code> and add <code>#endif</code> at the end of the program could solve the confict in header files. </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://d0048.github.io/blog/2017/02/08/a-way-to-avoid-duplicate-declaration/" data-id="cj93x35yi000ijqak8uwcnwku" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/C/">C</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/CPP/">CPP</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-a-good-way-to-avoid-duplicated-definition-in-header-files" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2017/02/08/a-good-way-to-avoid-duplicated-definition-in-header-files/" class="article-date">
  <time datetime="2017-02-08T14:16:32.000Z" itemprop="datePublished">2017-02-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2017/02/08/a-good-way-to-avoid-duplicated-definition-in-header-files/">Another good way to avoid duplicated declaration in C/C++ header files besides #ifdef</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Since I prefer to declare everything in the .h file instead of .c/.cpp to make the whole program more readable, I am always dealing with duplicated definitions because of wrong insertion of them. <br><br>Using <code>#ifndef</code> macro is the traditional way to do that, but I simply hate adding <code>#endif</code> at the end of my code. <br><br>Now, I found a new way to do that. Adding key word <code>extern</code> before declaring them and declare them again in the .c/.cpp file can also do the trick. Since the compiles simple replace the .h file at the place where the macro <code>#include</code> is, using extern can solve all the conflicts. </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://d0048.github.io/blog/2017/02/08/a-good-way-to-avoid-duplicated-definition-in-header-files/" data-id="cj93x35yk000ljqakbiaxw7ci" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/C/">C</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/CPP/">CPP</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-a" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2017/02/06/a/" class="article-date">
  <time datetime="2017-02-06T04:14:31.000Z" itemprop="datePublished">2017-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2017/02/06/a/">A Script That Might Crush Ubuntu Without Root</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Name the script <code>something.sh</code> and write <code>./something.sh</code> inside it. This is a infinite loop that takes up all the cores of cpu instead of just one like the traditional loops do. It will cause the computer stop resonponding till it lost power. </p>
<p>Now I wonder I to solve this problem.</p>
<p>2017/2/6</p>
<p>Update: Just use <code>ulimit</code>…</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://d0048.github.io/blog/2017/02/06/a/" data-id="cj93x35xy0007jqak1um7sjp7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Security/">Security</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ubuntu-failure-to-download-extra-data-files-ttf-mscorefonts-installer-solution" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2017/01/12/ubuntu-failure-to-download-extra-data-files-ttf-mscorefonts-installer-solution/" class="article-date">
  <time datetime="2017-01-12T01:29:15.000Z" itemprop="datePublished">2017-01-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2017/01/12/ubuntu-failure-to-download-extra-data-files-ttf-mscorefonts-installer-solution/">Ubuntu-Failure to download extra data files - ttf-mscorefonts-installer-Solution</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>Download the fonts from “<a href="http://ftp.de.debian.org/debian/pool/contrib/m/msttcorefonts/ttf-mscorefonts-installer_3.6_all.deb" target="_blank" rel="external">http://ftp.de.debian.org/debian/pool/contrib/m/msttcorefonts/ttf-mscorefonts-installer_3.6_all.deb</a>“<br><code>wget http://ftp.de.debian.org/debian/pool/contrib/m/msttcorefonts/ttf-mscorefonts-installer_3.6_all.deb</code></p>
</li>
<li><p>install it.<br><code>sudo dpkg -i ttf-mscorefonts-installer_3.6_all.deb</code></p>
</li>
<li><p>Problem solved.</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://d0048.github.io/blog/2017/01/12/ubuntu-failure-to-download-extra-data-files-ttf-mscorefonts-installer-solution/" data-id="cj93x361l0043jqakag15ihfe" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Solution/">Solution</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-nullpointer-error-cost-in-arraylist-when-iterating-through-it-by-foreach-function-in-java" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2017/01/05/nullpointer-error-cost-in-arraylist-when-iterating-through-it-by-foreach-function-in-java/" class="article-date">
  <time datetime="2017-01-05T13:53:26.000Z" itemprop="datePublished">2017-01-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2017/01/05/nullpointer-error-cost-in-arraylist-when-iterating-through-it-by-foreach-function-in-java/">NullPointer Error in ArrayList When Iterating Through It by Foreach Function in Java</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>I found that even if an ArrayList is null, the <code>List.isEmpty</code> will still return a true value for unknown reason. In another word, use <code>(blockodeList!=null &amp;&amp; !blockodeList.isEmpty())</code> instead of just the second one to see if it is safe to operate the ArrayList. </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://d0048.github.io/blog/2017/01/05/nullpointer-error-cost-in-arraylist-when-iterating-through-it-by-foreach-function-in-java/" data-id="cj93x360b002bjqakg512cvql" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Solution/">Solution</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-allow-scripts-and-other-programs-too-boot-with-linux" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2016/12/20/allow-scripts-and-other-programs-too-boot-with-linux/" class="article-date">
  <time datetime="2016-12-20T01:40:58.000Z" itemprop="datePublished">2016-12-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2016/12/20/allow-scripts-and-other-programs-too-boot-with-linux/">Allow scripts and other programs to boot with Linux</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>There are a few ways to do that.</p>
<ol>
<li>add your script or program in th form of absolute pass inside the <code>/etc/rc.local</code> before <code>exit 0</code>. </li>
</ol>
<p>2.Use sys-rc-config to set a suitable start up level.<br>==Remember to disable your script before installing new software if you are using this way. Unregistered scripts will confuse the installation program and stop it.==</p>
<p>3.register the program as a service in the system. </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://d0048.github.io/blog/2016/12/20/allow-scripts-and-other-programs-too-boot-with-linux/" data-id="cj93x35yg000gjqak7gsym8wu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Solution/">Solution</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-useful-methods-from-bukkit" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2016/12/13/useful-methods-from-bukkit/" class="article-date">
  <time datetime="2016-12-13T07:52:54.000Z" itemprop="datePublished">2016-12-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2016/12/13/useful-methods-from-bukkit/">Useful Methods from Bukkit</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p><code>ChatColor.[ColorCode]</code><br>Change the color of the following chat.<br>Reminding: what follows after with a “+” and must be a String. Even if it getLogger().info or print will automatically change non-String objects into string with the toString method, this one won’t work. We need to manually use object.toString if it’s after this method and connect with “+”.</p>
</li>
<li><p><code>Block.setType(Material.material)</code><br>Use Material.air to set to blank.<br>Use Location.getBlock to get Block or Bukkit.getBlock to get block.</p>
</li>
<li><p><code>playEffect(Location loc, Effect effect, int data)</code></p>
</li>
<li><p><code>List&lt;Entity&gt; near = location.getWorld().getEntities();</code><br>Get all entities in the world</p>
</li>
<li><p><code>e.getLocation().distance(location) &lt;= radius</code><br>Get distance between two location</p>
</li>
<li><p><code>entity.setVelocity(new Vector(5.0D, e.getBlock().getLocation().getY(), 5.0D));</code><br>Push entity</p>
</li>
<li><p><code>for(Entity entity : e.getPlayer().getNearbyEntities(20.0D, 20.0D, 20.0D))</code><br>A cycle for each entity nearby</p>
</li>
<li><p><code>((CraftPlayer) player).getHandle().a(true, false, false)</code><br>Eject player from a bed by opening a box to him.</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://d0048.github.io/blog/2016/12/13/useful-methods-from-bukkit/" data-id="cj93x3613003hjqakv8ofkkrs" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Bukkit/">Bukkit</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-a-huge-vulnerability-on-most-of-the-multicraft-panel-hosting-service" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2016/12/13/a-huge-vulnerability-on-most-of-the-multicraft-panel-hosting-service/" class="article-date">
  <time datetime="2016-12-13T07:50:46.000Z" itemprop="datePublished">2016-12-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2016/12/13/a-huge-vulnerability-on-most-of-the-multicraft-panel-hosting-service/">A Huge Vulnerability on Most of the Multicraft Panel Hosting Service</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>2016/12/13<br>Multicraft: <a href="http://www.multicraft.org/" target="_blank" rel="external">http://www.multicraft.org/</a></p>
<p>When a customer purchases a web-panel Minecraft Server, it’s actually one of the server applications runs on a server. Most of the time, the operating system is Windows server (at least at here…). These kind of services will usually go with an account on the web-panel and an account for a FTP file server with limited accessibility. The web-panel is used to manage the input and output of the application log. The ftp server is used to manage the files belongs to the application including plugins and maps. </p>
<p>So I believe that there will be multiple server appilication on the actual server because 2 application might share the same subdomain/ip address but just in different ports. Since accessing other dictionaries on the FTP server is prohibited, I believe that no dockers/virtual machines are present. </p>
<p>Also, I found that although users don’t have permission to edit other dictionaries, the application do have the permission to access the dictionaries of the other users. Since it’s not under linux, we don’t need to care about file owner’s issue. At the same time, we can easily access the application server through ftp server which is a compiled jar file. By reverse and recompile it, we can control the whole server. </p>
<p>Then I found that java codes in ./plugin and ./mod which is the application’s plugins and mods can be customized with your own code and will be executed by the application. In that, we can even execute shell command directly through runtime. Till now, I tried shutdown it and it works. </p>
<p>2016/12/14<br>Demo code:<a href="https://github.com/D0048/CraftPlugins/tree/master/ShellController" target="_blank" rel="external">https://github.com/D0048/CraftPlugins/tree/master/ShellController</a></p>
<p>2016/12/17<br>I tested in my server, it’s working.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://d0048.github.io/blog/2016/12/13/a-huge-vulnerability-on-most-of-the-multicraft-panel-hosting-service/" data-id="cj93x35y20009jqakgm7889sc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Bukkit/">Bukkit</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Security/">Security</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/blog/page/5/">&laquo; __('prev')</a><a class="page-number" href="/blog/">1</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/4/">4</a><a class="page-number" href="/blog/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/blog/page/7/">7</a><a class="extend next" rel="next" href="/blog/page/7/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Bukkit/">Bukkit</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/C/">C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/CPP/">CPP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Compiler/">Compiler</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Debug/">Debug</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/File-Recovery/">File Recovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Flash/">Flash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/GFW/">GFW</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Kindle/">Kindle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/ML/">ML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Machine-Learning/">Machine Learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Math/">Math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Network/">Network</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Outdated/">Outdated</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Problem/">Problem</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/SSH/">SSH</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Security/">Security</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Solution/">Solution</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Terminator/">Terminator</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Thoughts/">Thoughts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Vim/">Vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/WinAPI/">WinAPI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Xorg/">Xorg</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/blog/tags/Android/" style="font-size: 10px;">Android</a> <a href="/blog/tags/Bukkit/" style="font-size: 13.33px;">Bukkit</a> <a href="/blog/tags/C/" style="font-size: 16.67px;">C</a> <a href="/blog/tags/CPP/" style="font-size: 18.33px;">CPP</a> <a href="/blog/tags/Compiler/" style="font-size: 10px;">Compiler</a> <a href="/blog/tags/Debug/" style="font-size: 10px;">Debug</a> <a href="/blog/tags/File-Recovery/" style="font-size: 10px;">File Recovery</a> <a href="/blog/tags/Flash/" style="font-size: 10px;">Flash</a> <a href="/blog/tags/GFW/" style="font-size: 10px;">GFW</a> <a href="/blog/tags/Java/" style="font-size: 15px;">Java</a> <a href="/blog/tags/Kindle/" style="font-size: 11.67px;">Kindle</a> <a href="/blog/tags/Linux/" style="font-size: 13.33px;">Linux</a> <a href="/blog/tags/ML/" style="font-size: 10px;">ML</a> <a href="/blog/tags/Machine-Learning/" style="font-size: 11.67px;">Machine Learning</a> <a href="/blog/tags/Math/" style="font-size: 11.67px;">Math</a> <a href="/blog/tags/Network/" style="font-size: 10px;">Network</a> <a href="/blog/tags/Outdated/" style="font-size: 11.67px;">Outdated</a> <a href="/blog/tags/Problem/" style="font-size: 10px;">Problem</a> <a href="/blog/tags/Python/" style="font-size: 11.67px;">Python</a> <a href="/blog/tags/SSH/" style="font-size: 10px;">SSH</a> <a href="/blog/tags/Security/" style="font-size: 13.33px;">Security</a> <a href="/blog/tags/Solution/" style="font-size: 20px;">Solution</a> <a href="/blog/tags/Terminator/" style="font-size: 10px;">Terminator</a> <a href="/blog/tags/Thoughts/" style="font-size: 13.33px;">Thoughts</a> <a href="/blog/tags/Vim/" style="font-size: 10px;">Vim</a> <a href="/blog/tags/WinAPI/" style="font-size: 13.33px;">WinAPI</a> <a href="/blog/tags/Xorg/" style="font-size: 10px;">Xorg</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2016/11/">November 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2017/10/23/getopt-function-on-raspery-pi/">getopt() function on raspery pi</a>
          </li>
        
          <li>
            <a href="/blog/2017/10/17/The-Harmonic-Series-how-comes-the-divergence/">The Harmonic Series: How Comes the Divergence</a>
          </li>
        
          <li>
            <a href="/blog/2017/10/16/libcusolver-so-8-0-cannot-open-shared-object-file-error-while-importing-tensorflow/">&#34;libcusolver.so.8.0: cannot open shared object file&#34; error while importing tensorflow</a>
          </li>
        
          <li>
            <a href="/blog/2017/10/14/Difference-Between-Weights-and-Biases-Another-way-of-Looking-at-Forward-propagation/">Difference Between Weights and Biases: Another way of Looking at Forward Propagation</a>
          </li>
        
          <li>
            <a href="/blog/2017/10/12/Pass-Strings-from-Python-to-C-CPP-libs/">Pass Strings from Python to C/CPP libs</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">

<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://d0048.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                      
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 D0048<br>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog/js/script.js"></script>

  </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>